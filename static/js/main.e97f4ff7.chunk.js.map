{"version":3,"sources":["components/UploadImageContainer.jsx","components/ImageLoader.jsx","controllers/api-service.js","controllers/firebase-storage-service.js","firebase-config.js","components/ImageUploaded.jsx","App.js","reportWebVitals.js","index.js","App.module.css","components/css/UploadImageContainer.module.css","components/css/ImageLoader.module.css","components/css/ImageUploaded.module.css"],"names":["UploadImageContainer","fileLoadHandler","className","styles","dragAndDrogContainer","onDragOver","event","stopPropagation","preventDefault","dataTransfer","dropEffect","onDrop","fileObject","files","data-testid","iconFolderUpload","type","buttonWrapper","htmlFor","labelButton","id","inputFile","onChange","target","ImageLoader","imgName","classes","iconFileUpload","flexGrow","nameFile","loaderBar","progress","defaultProps","saveImageInApi","file","formData","FormData","append","name","fetch","method","body","then","response","json","catch","Error","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","saveImageInFirebaseStorage","storage","ref","child","put","snapshot","getDownloadURL","resp","url","_id","copy","previousSibling","select","document","execCommand","ImageUploaded","images","iconDone","imgHeight","src","alt","map","img","index","label","input","value","readOnly","buttonCopyLink","onClick","App","intervalID","useState","fileData","setFileData","imageURLsUploaded","setImageURLsUploaded","counter","startCounter","setInterval","clearInterval","querySelector","textContent","useEffect","image","style","width","Promise","all","data","transitionDuration","setTimeout","h1","p","overflowHidden","loaderHide","loaderShow","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.e97f4ff7.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './css/UploadImageContainer.module.css';\n\nconst UploadImageContainer = ({ fileLoadHandler }) => {\n  const dragOverHandler = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n    // Style the drag-and-drop as a \"copy file\" operation.\n    // eslint-disable-next-line no-param-reassign\n    event.dataTransfer.dropEffect = 'copy';\n  };\n\n  const dropHandler = (event) => {\n    event.stopPropagation();\n    event.preventDefault();\n    const fileList = event.dataTransfer.files;\n    const fileObject = fileList[0];\n    fileLoadHandler(fileObject);\n  };\n\n  const changeInputFileHandler = (event) => {\n    const fileList = event.target.files;\n    const fileObject = fileList[0];\n    fileLoadHandler(fileObject);\n  };\n\n  return (\n    <>\n      <section className=\"secondary-text-color text-center py-1\">\n        <div\n          className={styles.dragAndDrogContainer}\n          onDragOver={dragOverHandler}\n          onDrop={dropHandler}\n          data-testid=\"draganddrog-container\"\n        >\n          <span className={`material-icons ${styles.iconFolderUpload}`}>\n            drive_folder_upload\n          </span>\n          <p>Drag & Drop your image here</p>\n        </div>\n        <p>or</p>\n        <button\n          type=\"button\"\n          className={styles.buttonWrapper}\n        >\n          <label htmlFor=\"input-file\" className={styles.labelButton}>\n            Choose a file\n            <input\n              type=\"file\"\n              id=\"input-file\"\n              className={styles.inputFile}\n              onChange={changeInputFileHandler}\n            />\n          </label>\n        </button>\n      </section>\n    </>\n  );\n};\n\nexport default UploadImageContainer;\n\nUploadImageContainer.propTypes = {\n  fileLoadHandler: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './css/ImageLoader.module.css';\n\nconst ImageLoader = ({ imgName, classes }) => (\n  <section className={`py-1 ${classes}`} data-testid=\"image-loader-element\">\n    <div className=\"d-flex align-items-center\">\n      <span className={`material-icons-round ${styles.iconFileUpload}`}>\n        upload_file\n      </span>\n      <div className={styles.flexGrow}>\n        <p className={`d-flex ${styles.nameFile}`}>\n          {imgName}\n          <span id=\"load-counter\">0%</span>\n        </p>\n        <div className={styles.loaderBar}>\n          <div className={styles.progress} id=\"progress-bar\" />\n        </div>\n      </div>\n    </div>\n  </section>\n);\n\nexport default ImageLoader;\n\nImageLoader.defaultProps = {\n  imgName: '',\n};\n\nImageLoader.propTypes = {\n  imgName: PropTypes.string,\n  classes: PropTypes.string.isRequired,\n};\n","const saveImageInApi = (file) => {\n  const formData = new FormData();\n  formData.append('image', file, file.name);\n\n  return fetch('https://frozen-wildwood-40744.herokuapp.com/images', {\n    method: 'POST',\n    body: formData,\n  })\n    .then((response) => response.json())\n    .catch(() => new Error('There was an error, try again'));\n};\n\nexport default saveImageInApi;\n","import firebase from 'firebase/app';\nimport firebaseConfig from '../firebase-config';\n\nimport 'firebase/storage';\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nconst saveImageInFirebaseStorage = (file) => {\n  const storageRef = firebase.storage().ref();\n  const imageRef = storageRef.child(`images/${file.name}`);\n\n  return imageRef.put(file)\n    .then((snapshot) => snapshot.ref.getDownloadURL())\n    .then((resp) => ({\n      name: file.name,\n      url: resp,\n      _id: 2,\n    }));\n};\n\nexport default saveImageInFirebaseStorage;\n","export default {\n  apiKey: 'AIzaSyBCisdp2nhZ-zKTLxY29rLiAFvwjtDfIPY',\n  authDomain: 'image-uploader-dace2.firebaseapp.com',\n  projectId: 'image-uploader-dace2',\n  storageBucket: 'image-uploader-dace2.appspot.com',\n  messagingSenderId: '419170088208',\n  appId: '1:419170088208:web:91bb151d3c4793c253a195',\n};\n","/* eslint-disable jsx-a11y/label-has-associated-control */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './css/ImageUploaded.module.css';\n\nconst copy = (event) => {\n  const input = event.target.previousSibling;\n  input.select();\n  document.execCommand('copy');\n};\n\nconst ImageUploaded = ({ images }) => (\n  <section className=\"container flex-column section w-50\">\n    <div>\n      <span className={`material-icons-round ${styles.iconDone}`}>\n        check_circle\n      </span>\n    </div>\n    <h3>Uploaded Successfully!</h3>\n    <figure className=\"my-1\">\n      <img\n        className={`w100 ${styles.imgHeight}`}\n        src={images[0].url}\n        alt={images[0].name}\n      />\n    </figure>\n    <form className=\"w100 \">\n      { images.map((img, index) => (\n        <div key={img._id}>\n          <label className={styles.label}>\n            Option\n            {index + 1}\n          </label>\n          <div>\n            <input\n              className={styles.input}\n              value={img.url}\n              readOnly\n            />\n            <button\n              type=\"button\"\n              className={styles.buttonCopyLink}\n              onClick={copy}\n            >\n              Copy\n            </button>\n          </div>\n        </div>\n      )) }\n    </form>\n  </section>\n);\n\nexport default ImageUploaded;\n\nImageUploaded.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    url: PropTypes.string.isRequired,\n    _id: PropTypes.number.isRequired,\n  })).isRequired,\n};\n","import React, { useEffect, useState } from 'react';\nimport styles from './App.module.css';\nimport UploadImageContainer from './components/UploadImageContainer';\nimport ImageLoader from './components/ImageLoader';\nimport saveImageInApi from './controllers/api-service';\nimport saveImageInFirebaseStorage from './controllers/firebase-storage-service';\nimport ImageUploaded from './components/ImageUploaded';\n\nconst uploadImage = (image) => Promise.all([\n  saveImageInFirebaseStorage(image),\n  saveImageInApi(image),\n]);\n\nconst App = () => {\n  const [fileData, setFileData] = useState(null);\n  const [imageURLsUploaded, setImageURLsUploaded] = useState(null);\n  let counter = 0;\n  let intervalID;\n\n  const stopInterval = () => {\n    clearInterval(intervalID);\n  };\n\n  const startCounter = () => {\n    intervalID = setInterval(() => {\n      if (counter === 55 || counter === 100) {\n        stopInterval();\n      } else {\n        counter += 1;\n        document.querySelector('#load-counter').textContent = `${counter}%`;\n      }\n    }, 50);\n  };\n\n  useEffect(() => {\n    if (fileData) {\n      setImageURLsUploaded(null);\n      startCounter();\n      document.querySelector('#progress-bar').style.width = '55%';\n      uploadImage(fileData)\n        .then((data) => {\n          counter += 1;\n          startCounter();\n          document.querySelector('#progress-bar').style.transitionDuration = '2.5s';\n          document.querySelector('#progress-bar').style.width = '100%';\n          setTimeout(() => {\n            setFileData(null);\n            setImageURLsUploaded(data);\n            document.querySelector('#progress-bar').style.width = '0';\n          }, 2800);\n        });\n    }\n  }, [fileData]);\n\n  return (\n    <div className=\"container flex-column\">\n      <h1 className={styles.h1}>Upload your image</h1>\n      <p className={styles.p}>File should be Jpg, Png ...</p>\n      <div className=\"container flex-column section flex-row\">\n        <div className={`section w-50 ${styles.overflowHidden}`}>\n          <UploadImageContainer fileLoadHandler={setFileData} />\n          <ImageLoader\n            classes={`${styles.loaderHide} ${fileData && styles.loaderShow}`}\n            imgName={(fileData || {}).name}\n          />\n        </div>\n        { imageURLsUploaded && <ImageUploaded images={imageURLsUploaded} />}\n        { !imageURLsUploaded && <div className=\"container flex-column section w-50 minHeight\"><p>Aún no hay una imagen subida</p></div>}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","/* eslint-disable arrow-parens */\nconst reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"h1\":\"App_h1__26v8a\",\"overflowHidden\":\"App_overflowHidden__RFo6h\",\"loaderHide\":\"App_loaderHide__1LdpC\",\"loaderShow\":\"App_loaderShow__1p5jB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconFolderUpload\":\"UploadImageContainer_iconFolderUpload__3Qnc7\",\"dragAndDrogContainer\":\"UploadImageContainer_dragAndDrogContainer__238pc\",\"buttonWrapper\":\"UploadImageContainer_buttonWrapper__3v0pS\",\"labelButton\":\"UploadImageContainer_labelButton__1jxCn\",\"inputFile\":\"UploadImageContainer_inputFile__1_Zz1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconFileUpload\":\"ImageLoader_iconFileUpload__8c3LZ\",\"nameFile\":\"ImageLoader_nameFile__2YPtk\",\"flexGrow\":\"ImageLoader_flexGrow__36cXo\",\"loaderBar\":\"ImageLoader_loaderBar__4OrMT\",\"progress\":\"ImageLoader_progress__38l_m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconDone\":\"ImageUploaded_iconDone__2MCk5\",\"label\":\"ImageUploaded_label__1sQ7P\",\"input\":\"ImageUploaded_input__1whgh\",\"buttonCopyLink\":\"ImageUploaded_buttonCopyLink__3kR2k\",\"imgHeight\":\"ImageUploaded_imgHeight__AvbOi\"};"],"sourceRoot":""}